This extension exposes the abstract syntax tree generated by PHP 7.

This extension is experimental and the representation of the syntax tree is not final.

API overview
------------

Defines:

 * `ast\Node` class
 * `ast\AST_*` kind constants (mirroring `zend_ast.h`)
 * `ast\parseCode($code)`
 * `ast\getKindName($kind)`
 * `ast\kindUsesFlags($kind)`

Usage
-----

The `ast\parseCode()` function accepts a source code string (which is parsed in INITIAL mode, i.e.
it should generally include an opening PHP tag) and returns an abstract syntax tree consisting of
`ast\Node` objects. `ast\Node` is declared as follows:

```php
<?php

namespace ast;
class Node {
    public $kind;
    public $flags;
    public $lineno;
    public $children;
}
```

The `kind` property specified the type of the node. It is an integral value, which corresponds to
one of the `ast\AST_*` constants, for example `ast\AST_STMT_LIST`. You can retrieve the string name
of an integral kind by passing it to `ast\getKindName()`.

The `flags` property contains node specific flags. It is always defined, but for most nodes it is
always zero. `ast\kindUsesFlags()` can be used to determine whether a certain kind has a meaningful
flags value.

The `lineno` property specified the *starting* line number of the node.

The `children` property contains an array of child-nodes. These children can be either other
`ast\Node` objects or plain values. The meaning of the children is node-specific and should be
deduced from context or by looking at the [parser definition][parser].

Function and class declarations specify two additional properties: `endLineno` provides the end
line number of the declaration and `docComment` contains the preceding doc comment or `null` if
no doc comment was used.

Simple usage example:

```php
<?php

$code = <<<'EOC'
<?php
$var = 42;
EOC;

var_dump(ast\parseCode($code));

// Output:
object(ast\Node)#1 (4) {
  ["kind"]=>
  int(133)
  ["flags"]=>
  int(0)
  ["lineno"]=>
  int(1)
  ["children"]=>
  array(1) {
    [0]=>
    object(ast\Node)#2 (4) {
      ["kind"]=>
      int(517)
      ["flags"]=>
      int(0)
      ["lineno"]=>
      int(1)
      ["children"]=>
      array(2) {
        [0]=>
        object(ast\Node)#3 (4) {
          ["kind"]=>
          int(256)
          ["flags"]=>
          int(0)
          ["lineno"]=>
          int(1)
          ["children"]=>
          array(1) {
            [0]=>
            string(3) "var"
          }
        }
        [1]=>
        int(42)
      }
    }
  }
}
```

The [`util.php`][util] file defines an `ast_dump()` function, which can be used to create a more
compact and human-readable dump of the AST structure:

```php
<?php

require 'path/to/util.php';

$code = <<<'EOC'
<?php
$var = 42;
EOC;

echo ast_dump(ast\parseCode($code)), "\n";

// Output:
AST_STMT_LIST @ 1 {
    0: AST_ASSIGN @ 1 {
        0: AST_VAR @ 1 {
            0: "var"
        }
        1: 42
    }
}
```

A more substantial AST dump can be found [in the tests][test_dump].

  [parser]: http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_language_parser.y
  [util]: https://github.com/nikic/php-ast/blob/master/util.php
  [test_dump]: https://github.com/nikic/php-ast/blob/master/tests/001.phpt
